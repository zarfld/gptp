{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Check WPCAP_DIR environment",
      "type": "shell",
      "windows": {
        "command": "powershell",
        "args": [
          "-Command",
          "echo WPCAP_DIR is: $env:WPCAP_DIR"
        ]
      },
      "group": "build",
      "problemMatcher": []
    },
    {
      "label": "Check CMake version",
      "type": "shell",
      "windows": {
        "command": "cmake",
        "args": [ "--version" ]
      },
      "group": "build",
      "problemMatcher": []
    },

    {
      "label": "Configure project",
      "type": "shell",
      "windows": {
        "command": "cmake",
        "args": [
          "-B", "build",
          "-DCMAKE_BUILD_TYPE=Release"
        ]
      },
      "dependsOn": [
        "Check WPCAP_DIR environment",
        "Check CMake version"
      ],
      "group": "build",
      "problemMatcher": []
    },
    {
      "label": "Build project",
      "type": "shell",
      "windows": {
        "command": "cmake",
        "args": [
          "--build", "build",
          "--config", "Release"
        ]
      },
      "dependsOn": [
        "Configure project"
      ],
      "group": "build",
      "problemMatcher": []
    },
        {
      "label": "Configure Debug",
      "type": "shell",
      "windows": {
        "command": "cmake",
        "args": [
          "-B", "build",
          "-DCMAKE_BUILD_TYPE=Debug"
        ]
      },
      "dependsOn": [
        "Check WPCAP_DIR environment",
        "Check CMake version"
      ],
      "group": "build",
      "problemMatcher": []
    },
    {
      "label": "Build project Debug",
      "type": "shell",
      "windows": {
        "command": "cmake",
        "args": [
          "--build", "build",
          "--config", "Debug"
        ]
      },
      "dependsOn": [
        "Configure Debug"
      ],
      "group": "build",
      "problemMatcher": []
    },
    {
      "label": "Debug gptp",
      "type": "shell",
      "windows": {
          "command": "powershell",
          "args": [
            "-NoProfile",
            "-Command",
            "$mac = (Get-NetAdapter | Where-Object { $_.InterfaceDescription -like ''*I210*''  } | Select-Object -First 1 -ExpandProperty MacAddress);",
            "& 'build\\Debug\\gptp.exe' $mac"
          ]
        },
        "dependsOn": [
        "Build project Debug"
      ],
      "group": "build",
      "problemMatcher": []
    }
  ]
}
